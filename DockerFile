FROM ghcr.io/puppeteer/puppeteer:latest

# Railway precisa de root pra não dar permissão
USER root

WORKDIR /app

# Instala só as dependências de produção
COPY package*.json ./
RUN npm ci --only=production

COPY . .

# Usa o start do seu package.json (que roda node server.js)
CMD ["npm", "start"]
